port: 7890
socks-port: 7891
mixed-port: 7893
allow-lan: false
mode: rule
log-level: info
ipv6: true
geodata-mode: true
geox-url:
  geoip: 'https://gcore.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat'
  geosite: 'https://gcore.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat'
  mmdb: 'https://gcore.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb'
  asn: 'https://gcore.jsdelivr.net/gh/Loyalsoldier/geoip@release/GeoLite2-ASN.mmdb'
#external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: true      #å¦‚ç½‘ç»œç¯å¢ƒä¸æ”¯æŒIPv6è¯·è®¾ä¸ºfalse
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:     #ä½¿ç”¨geositeåŸŸåé›†åˆä»¥ç²¾ç®€é…ç½®ï¼Œä¹Ÿå¯ä½¿ç”¨è§„åˆ™é›†ï¼ˆrulesetï¼‰
    - 'geosite:private'
    - 'geosite:connectivity-check'
    - 'geosite:cn'
    - Mijia Cloud
    - dig.io.mi.com
    - localhost.ptlogin2.qq.com
    - '*.icloud.com'
    - '*.stun.*.*'
    - '*.stun.*.*.*'
  use-hosts: false     #å¦‚æœ‰ç‰¹æ®Šéœ€æ±‚è¯·è®¾ä¸ºtrue
  use-system-hosts: false     #å¦‚æœ‰ç‰¹æ®Šéœ€æ±‚è¯·è®¾ä¸ºtrue
  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
  direct-nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
  respect-rules: true

#proxies:
  # å ä½ç¬¦ï¼Œé¿å…æŠ¥é”™
  # - name: "Placeholder"
  #   type: ss
  #   server: server
  #   port: 443
  #   cipher: chacha20-ietf-poly1305
  #   password: password

sniffer:
  sniff:
    TLS:
      ports:
        - 443
        - 8443
    HTTP:
      ports:
        - 80
        - 8080
        - 8880
    QUIC:
      ports:
        - 443
        - 8443
  override-destination: false
  enable: true
  force-dns-mapping: true
  skip-domain:
    - Mijia Cloud
    - dlg.io.mi.com
    - +.push.apple.com

proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - DIRECT
    include-all: true

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: ğŸ“ˆ ç½‘ç»œæµ‹é€Ÿ
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

  - name: ğŸ¤– äººå·¥æ™ºèƒ½
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

  - name: ğŸµ TikTok
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt"
    path: ./rules/reject.yaml
    interval: 86400

  youtube:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/youtube.txt"
    path: ./rules/youtube.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/google.txt"
    path: ./rules/google.yaml
    interval: 86400
    
  telegram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/telegramcidr.txt"
    path: ./rules/telegram.yaml
    interval: 86400

  netflix:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/netflix.txt"
    path: ./rules/netflix.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/apple.txt"
    path: ./rules/apple.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt"
    path: ./rules/proxy.yaml
    interval: 86400

  cn:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/cn.txt"
    path: ./rules/cn.yaml
    interval: 86400
    
  speedtest:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/domainset/speedtest.txt"
    path: ./sukkaw_ruleset/speedtest.txt

  download_domainset:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/domainset/download.txt"
    path: ./sukkaw_ruleset/download_domainset.txt

  download_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/download.txt"
    path: ./sukkaw_ruleset/download_non_ip.txt

  ai_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/ai.txt"
    path: ./sukkaw_ruleset/ai_non_ip.txt

  apple_intelligence_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/apple_intelligence.txt"
    path: ./sukkaw_ruleset/apple_intelligence_non_ip.txt

  TikTok:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: "https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/TikTok.list"
    path: ./ruleset/TikTok.list

  apple_cdn:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt"
    path: ./sukkaw_ruleset/apple_cdn.txt

  apple_services:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/apple_services.txt"
    path: ./sukkaw_ruleset/apple_services.txt

  apple_cn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt"
    path: ./sukkaw_ruleset/apple_cn_non_ip.txt

  microsoft_cdn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt"
    path: ./sukkaw_ruleset/microsoft_cdn_non_ip.txt

  microsoft_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/non_ip/microsoft.txt"
    path: ./sukkaw_ruleset/microsoft_non_ip.txt

  china_ip:
    type: http
    behavior: ipcidr
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/ip/china_ip.txt"
    path: ./sukkaw_ruleset/china_ip.txt

  china_ip_ipv6:
    type: http
    behavior: ipcidr
    format: text
    interval: 43200
    url: "https://ruleset.skk.moe/Clash/ip/china_ip_ipv6.txt"
    path: ./sukkaw_ruleset/china_ipv6.txt

rules:
  # è§„åˆ™é›† (Rule Sets)
  - RULE-SET,reject,REJECT
  - RULE-SET,youtube,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,telegram,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,apple,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple_cdn,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple_services,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple_cn_non_ip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,microsoft_cdn_non_ip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,microsoft_non_ip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,china_ip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,china_ip_ipv6,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,speedtest,ğŸ“ˆ ç½‘ç»œæµ‹é€Ÿ
  - RULE-SET,ai_non_ip,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,apple_intelligence_non_ip,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,TikTok,ğŸµ TikTok
  - RULE-SET,download_domainset,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,download_non_ip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn,ğŸ¯ å…¨çƒç›´è¿

  # User Added GEOSITE
  - GEOSITE,GOOGLE-PLAY@CN,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,TELEGRAM,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,YOUTUBE,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,NETFLIX,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,SPOTIFY,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,PIKPAK,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,GFW,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,CN,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,PRIVATE,ğŸ¯ å…¨çƒç›´è¿

  # User Added GEOIP
  - GEOIP,NETFLIX,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,TELEGRAM,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,PRIVATE,ğŸ¯ å…¨çƒç›´è¿

  # åŸºç¡€è§„åˆ™
  - GEOIP,LAN,DIRECT,no-resolve
  
  # IPv6 ç§æœ‰åœ°å€
  - IP-CIDR6,fc00::/7,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - IP-CIDR6,fe80::/10,ğŸ¯ å…¨çƒç›´è¿,no-resolve

  # æœ€ç»ˆå…œåº•
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
